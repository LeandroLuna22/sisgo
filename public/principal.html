<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Página Principal</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<h1 id="bem-vindo">SisGO</h1>

  <nav id="menu"></nav>

<script>
fetch('/user')
  .then(res => res.json())
  .then(user => {
    // Atualiza frase de boas-vindas
    const h1 = document.getElementById('bem-vindo');
    h1.textContent = `Bem vindo ao SisGO ${user.nome}.`;

    // Define os botões como objetos
    const allButtons = [
      { label: "Criar Nota", href: "/criar-nota.html", class: "btn-menu", roles: ["admin"] },
      { label: "Abrir Ordem", href: "/abrir-ordem.html", class: "btn-menu", roles: ["admin"] },
      { label: "Visualizar Notas", href: "/visualizar-notas.html", class: "btn-menu", roles: ["usuario", "admin"] },
      { label: "Visualizar Ordens", href: "/visualizar-ordens.html", class: "btn-menu", roles: ["usuario", "admin"] },
      { label: "Cadastrar Usuário", href: "/cadastro.html", class: "btn-cadastro", roles: ["admin"] },
      { label: "Logout", href: "/logout", class: "btn-sair", roles: ["usuario", "admin"] }
    ];

    // Filtra os botões conforme o tipo do usuário
    const buttonsToShow = allButtons.filter(btn => btn.roles.includes(user.tipo));

    // Renderiza os botões no menu
    const menu = document.getElementById('menu');
    menu.innerHTML = buttonsToShow
      .map(btn => `<a class="${btn.class}" href="${btn.href}">${btn.label}</a>`)
      .join('');
  });
</script>

</body>
</html>

